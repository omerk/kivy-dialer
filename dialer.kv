#:import FadeTransition kivy.uix.screenmanager.FadeTransition

# dynamic class for img button
<ImageButton@Button>:
	source: None

	Image:
		source: root.source
		pos: root.pos
		size: root.size

# the actual layout
AnchorLayout:
	anchor_x: 'center'
	anchor_y: 'top'

	ScreenManager:
		size_hint: 1, .9
		id: _screen_manager
		#HACK: NoTransition available in >1.8.0, pip stable is 1.7.2
		transition: FadeTransition(duration=0.001)
 
		Screen:
			name: 'screenContacts'
			Label: 
				text: 'contacts'

		Screen:
			name: 'screenNumpad'

			BoxLayout:	
				orientation: 'vertical'

				# top bit with the number and the clear button
				BoxLayout:
					id: boxNum
					orientation: 'horizontal'
			
					TextInput:
						size_hint: .9, 1
						id: phoneNum
						font_size: 30

					Button:
						size_hint: .1, 1
						id: btnDelNum
						text: "<"
						on_press: app.delNum()

				# numbers 
				BoxLayout:
					id: boxNum
					orientation: 'vertical'
	
					GridLayout:
						rows: 4
						cols: 3
				
						Button:
							id: btnNum1
							text: "1"
							on_press: app.appendNum("1")
						Button:
							id: btnNum2
							text: "2"
							on_press: app.appendNum("2")
						Button:
							id: btnNum3
							text: "3"
							on_press: app.appendNum("3")


						Button:
							id: btnNum4
							text: "4"
							on_press: app.appendNum("4")
						Button:
							id: btnNum5
							text: "5"
							on_press: app.appendNum("5")
						Button:
							id: btnNum6
							text: "6"
							on_press: app.appendNum("6")
	
	
						Button:
							id: btnNum7
							text: "7"
							on_press: app.appendNum("7")
						Button:
							id: btnNum8
							text: "8"
							on_press: app.appendNum("8")
						Button:
							id: btnNum9
							text: "9"
							on_press: app.appendNum("9")
	
	
						Button:
							id: btnNumStar
							text: "*"
							on_press: app.appendNum("*")
						Button:
							id: btnNum0
							text: "0"
							on_press: app.appendNum("0")
						Button:
							id: btnNumHash
							text: "#"
							on_press: app.appendNum("#")
	
				# call button
				Button:
					text: "Call"
					on_press: app.callNum()

		# call history
		Screen:
			name: 'screenHistory'
			Label: 
				text: 'history'

	# screen selectors
	AnchorLayout:
		anchor_x: 'center'
		anchor_y: 'bottom'

		BoxLayout:
			orientation: 'horizontal'
			size_hint: 1, .1

			ImageButton:
				source: 'assets/contacts.png'
				on_press: _screen_manager.current = 'screenContacts'

			ImageButton:
				source: 'assets/numpad.png'
				on_press: _screen_manager.current = 'screenNumpad'

			ImageButton:
				source: 'assets/history.png'
				on_press: _screen_manager.current = 'screenHistory'

